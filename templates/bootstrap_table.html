<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>AWDB API Table Generator</title>
  <meta name="description" content="A simple example of how to embed a awdb sourced data table in webpage.">
  <meta name="author" content="NRCS-NWCC">

  <meta property="og:title" content="Basic awdb API js examples">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://api.snowdata.info">
  <meta property="og:description" content="Use bootstrap-table.js and the /stations/getMeta endpoint to create a responsive metadata table">
  <meta property="og:image" content="/android-chrome-192x192.png">
  
  <link rel="apple-touch-icon" href="/static/apple-touch-icon.png">
  <link href="/static/favicon.ico" rel="shortcut icon">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css">

</head>

<body>

<nav class="navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="/">
    <img src="/static/favicon-32x32.png" width="32" height="32" class="d-inline-block align-top m-2 p-1" alt="snowflake logo">
    awdb API Examples - Snotel Sites' Metadata Table
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="nav nav-tabs" id="exampleTabs" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="demo-tab" data-toggle="tab" href="#demo" role="tab" aria-controls="demo" aria-selected="true">Demo</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="code-tab" data-toggle="tab" href="#code" role="tab" aria-controls="code" aria-selected="false">Code</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/" aria-selected="false">API Docs</a>
      </li>
    </ul>
  </div>
</nav>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="demo" role="tabpanel" aria-labelledby="demo-tab">
      <!-- example below -->
      <div class="container px-lg-5">
        <div class="row my-1 mx-lg-n5">
            <div class="col py-1 px-lg-5 border bg-light">
                <div id="toolbar">
                    <select id="state-picker" class="custom-select custom-select-sm">
                      <option selected>Select a state...</option>
                      <option value="AK">Alaska</option>
                      <option value="AZ">Arizona</option>
                      <option value="CO">Colorado</option>
                      <option value="ID">Idaho</option>
                      <option value="MT">Montana</option>
                      <option value="NV">Nevada</option>
                      <option value="NM">New Mexico</option>
                      <option value="OR">Oregon</option>
                      <option value="UT">Utah</option>
                      <option value="WA">Washington</option>
                      <option value="WY">Wyoming</option>
                    </select>
                </div>
                <table
                  id="table"
                  data-toggle="table"
                  data-url="{{api_root}}/stations/getMeta?siteId=ALL&network=SNTL&state=AK&element=ALL&meta=true&format=json&orient=records"
                  data-pagination="true"
                  data-search="true"
                  data-sort-name="name"
                  data-sort-order="asc"
                  data-height="440"
                  data-show-pagination-switch="true"
                  data-show-refresh="true"
                  data-show-toggle="true"
                  data-show-columns="true"
                  data-show-fullscreen="true"
                  data-detail-view="true"
                  data-detail-formatter="detailFormatter"
                  data-show-export="true"
                  data-export-types="['json', 'xml', 'png', 'csv', 'txt', 'sql', 'doc', 'excel', 'xlsx', 'pdf']"
                  data-export-data-type="all">
                  <thead>
                    <tr>
                      <th data-sortable="true" data-field="name">Site Name</th>
                      <th data-sortable="true" data-field="stationTriplet">ID (triplet)</th>
                      <th data-sortable="true" data-field="beginDate">Data Since</th>
                      <th data-sortable="true" data-field="latitude">Latitude</th>
                      <th data-sortable="true" data-field="longitude">Longitude</th>
                      <th data-sortable="true" data-field="elevation">Elevation</th>
                    </tr>
                  </thead>
                </table>
            </div>
          </div>
        </div>
<!-- example above -->
  </div>
  <div class="tab-pane fade" id="code" role="tabpanel" aria-labelledby="code-tab">
    <pre><code>
      &lt;div class="container px-lg-5"&gt;
        &lt;div class="row my-1 mx-lg-n5"&gt;
            &lt;div class="col py-1 px-lg-5 border bg-light"&gt;
                &lt;div id="toolbar"&gt;
                    &lt;select id="state-picker" class="custom-select custom-select-sm"&gt;
                      &lt;option selected&gt;Select a state...&lt;/option&gt;
                      &lt;option value="AK"&gt;Alaska&lt;/option&gt;
                      &lt;option value="AZ"&gt;Arizona&lt;/option&gt;
                      &lt;option value="CO"&gt;Colorado&lt;/option&gt;
                      &lt;option value="ID"&gt;Idaho&lt;/option&gt;
                      &lt;option value="MT"&gt;Montana&lt;/option&gt;
                      &lt;option value="NV"&gt;Nevada&lt;/option&gt;
                      &lt;option value="NM"&gt;New Mexico&lt;/option&gt;
                      &lt;option value="OR"&gt;Oregon&lt;/option&gt;
                      &lt;option value="UT"&gt;Utah&lt;/option&gt;
                      &lt;option value="WA"&gt;Washington&lt;/option&gt;
                      &lt;option value="WY"&gt;Wyoming&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;table
                  id="table"
                  data-toggle="table"
                  data-url="/stations/getMeta?siteId=ALL&network=SNTL&state=AK&element=ALL&meta=true&format=json&orient=records"
                  data-pagination="true"
                  data-search="true"
                  data-sort-name="name"
                  data-sort-order="asc"
                  data-height="440"
                  data-show-pagination-switch="true"
                  data-show-refresh="true"
                  data-show-toggle="true"
                  data-show-columns="true"
                  data-show-fullscreen="true"
                  data-detail-view="true"
                  data-detail-formatter="detailFormatter"
                  data-show-export="true"
                  data-export-types="['json', 'xml', 'png', 'csv', 'txt', 'sql', 'doc', 'excel', 'xlsx', 'pdf']"
                  data-export-data-type="all"&gt;
                  &lt;thead&gt;
                    &lt;tr&gt;
                      &lt;th data-sortable="true" data-field="name"&gt;Site Name&lt;/th&gt;
                      &lt;th data-sortable="true" data-field="stationTriplet"&gt;ID (triplet)&lt;/th&gt;
                      &lt;th data-sortable="true" data-field="beginDate"&gt;Data Since&lt;/th&gt;
                      &lt;th data-sortable="true" data-field="latitude"&gt;Latitude&lt;/th&gt;
                      &lt;th data-sortable="true" data-field="longitude"&gt;Longitude&lt;/th&gt;
                      &lt;th data-sortable="true" data-field="elevation"&gt;Elevation&lt;/th&gt;
                    &lt;/tr&gt;
                  &lt;/thead&gt;
                &lt;/table&gt;
            &lt;/div&gt;

&lt;!-- Custom javascript needed to populate the table --&gt;

&lt;script&gt;
  function detailFormatter(index, row) {
    var html = []
    $.each(row, function (key, value) {
      html.push('&lt;p&gt;&lt;b&gt;' + key + ':&lt;/b&gt; ' + value + '&lt;/p&gt;')
    })
    return html.join('')
  }
&lt;/script&gt;
&lt;script&gt;
  var $table = $('#table')
  var $picker = $('#state-picker')

  $(function() {
    $picker.change(function () {
      var domain = '{{api_root}}'
      var state = $(this).find("option:selected").val();
      var url = domain + '/stations/getMeta?siteId=ALL&network=SNTL&state=' + state + '&element=ALL&meta=true&format=json&orient=records'
      console.log('switching meta data to ' + state + ' using ' + url)
      $table.bootstrapTable('refreshOptions', {
        url: url
      })
    })
  })
&lt;/script&gt;

&lt;!-- include jss and css --&gt;

  &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"&gt;
  &lt;link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous"&gt;
  &lt;link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css"&gt;

  &lt;script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"&gt;&lt;/script&gt;
  &lt;script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/export/bootstrap-table-export.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/tableExport.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF/jspdf.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF-AutoTable/jspdf.plugin.autotable.js"&gt;&lt;/script&gt;

    </pre></code>
  </div>
</div>
<script>
  function detailFormatter(index, row) {
    var html = []
    $.each(row, function (key, value) {
      html.push('<p><b>' + key + ':</b> ' + value + '</p>')
    })
    return html.join('')
  }
</script>

  <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>
  <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/export/bootstrap-table-export.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/tableExport.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF/jspdf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF-AutoTable/jspdf.plugin.autotable.js"></script>
<script>
  var $table = $('#table')
  var $picker = $('#state-picker')

  $(function() {
    $picker.change(function () {
      var domain = '{{api_root}}'
      var state = $(this).find("option:selected").val();
      var url = domain + '/stations/getMeta?siteId=ALL&network=SNTL&state=' + state + '&element=ALL&meta=true&format=json&orient=records'
      console.log('switching meta data to ' + state + ' using ' + url)
      $table.bootstrapTable('refreshOptions', {
        url: url
      })
    })
  })
</script>
</body>
</html>
